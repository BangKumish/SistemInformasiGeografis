<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web GIS Lampung</title>
    
    <!-- Link ke stylesheet Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    
    <!-- Link ke stylesheet Mapbox -->
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.9.0/mapbox-gl.css" rel="stylesheet" />
    
    <style>
        #map {
            height: 600px;
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>Web GIS Pariwisata Lampung</h1>
    <div id="map"></div>

    <!-- Load Leaflet.js -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <!-- Mapbox JS -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.9.0/mapbox-gl.js"></script>

    <script>
        // Inisialisasi peta
        const map = L.map('map').setView([-5.4295, 105.2610], 13); // Lokasi Bandar Lampung

        // Tambahkan peta dasar dari Mapbox
        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=Token', {
            maxZoom: 18,
            id: 'mapbox/streets-v11',
            tileSize: 512,
            zoomOffset: -1,
            accessToken: 'Token' // Ganti dengan token Mapbox Anda
        }).addTo(map);

        // Ambil data GeoJSON dari backend Flask
        fetch('/get_geojson')
            .then(response => response.json())
            .then(data => {
                // Menambahkan objek GeoJSON ke peta
                const geojsonLayer = L.geoJSON(data, {
                    onEachFeature: function (feature, layer) {
                        // Menambahkan marker untuk setiap objek
                        layer.bindPopup(`<h3>${feature.properties.nama_objek}</h3>
                                         <p>${feature.properties.jenis_obje}</p>
                                         <p>${feature.properties.alamat}</p>
                                         <p>${feature.properties.deskripsi}</p>`);
                    },
                    pointToLayer: function (feature, latlng) {
                        return L.marker(latlng); // Menambahkan marker pada titik lokasi
                    }
                }).addTo(map);
            })
            .catch(error => console.error('Error fetching GeoJSON data:', error));
    </script>
</body>
</html>
